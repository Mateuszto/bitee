<div class="flex flex-col gap-6">
   <h2 class="text-xl font-semibold">Dane firmy</h2>
   <form
      tuiForm="m"
      [formGroup]="formGroup()"
      class="flex flex-col gap-4"
      (ngSubmit)="onSubmit.emit()"
   >
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div class="flex flex-col gap-4">
            <tui-textfield>
               <label tuiLabel for="companyName">Nazwa firmy</label>
               <input
                  name="companyName"
                  autocomplete="organization"
                  formControlName="companyName"
                  placeholder="Wprowadź nazwę firmy"
                  tuiTextfield
               />
            </tui-textfield>
            <tui-error formControlName="companyName" [error]="[] | tuiFieldError | async" />
         </div>
         <div class="flex flex-col gap-4">
            <tui-textfield>
               <label tuiLabel for="nip">NIP</label>
               <input tuiTextfield name="nip" formControlName="nip" placeholder="Wprowadź NIP" />
            </tui-textfield>
            <tui-error formControlName="nip" [error]="[] | tuiFieldError | async" />
         </div>
      </div>

      <tui-textfield>
         <label tuiLabel for="address">Adres</label>
         <input
            name="address"
            formControlName="address"
            autocomplete="address-level3"
            placeholder="Wprowadź adres"
            tuiTextfield
         />
      </tui-textfield>
      <tui-error formControlName="address" [error]="[] | tuiFieldError | async" />

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div class="flex flex-col gap-4">
            <tui-textfield>
               <label tuiLabel for="city">Miasto</label>
               <input
                  name="city"
                  formControlName="city"
                  autocomplete="address-level2"
                  placeholder="Wprowadź miasto"
                  tuiTextfield
               />
            </tui-textfield>
            <tui-error formControlName="city" [error]="[] | tuiFieldError | async" />
         </div>
         <div class="flex flex-col gap-4">
            <tui-textfield>
               <label tuiLabel for="postalCode">Kod pocztowy</label>
               <input
                  name="postalCode"
                  formControlName="postalCode"
                  autocomplete="postal-code"
                  placeholder="00-000"
                  tuiTextfield
                  [maskito]="postalCodeMask"
               />
            </tui-textfield>
            <tui-error formControlName="postalCode" [error]="[] | tuiFieldError | async" />
         </div>
      </div>

      <tui-textfield>
         <label tuiLabel for="phone">Telefon</label>
         <input
            name="phone"
            autocomplete="tel"
            formControlName="phone"
            placeholder="Wprowadź numer telefonu"
            tuiTextfield
         />
      </tui-textfield>
      <tui-error formControlName="phone" [error]="[] | tuiFieldError | async" />

      <div class="flex flex-col gap-2 mt-4">
         <label class="flex items-start gap-2" for="acceptAll">
            <input
               tuiCheckbox
               name="acceptAll"
               type="checkbox"
               formControlName="acceptAll"
               (change)="selectAllAcceptances()"
            />
            <span class="text-sm"> Zaznacz wszystkie </span>
         </label>

         <div class="flex flex-col gap-4">
            <label class="flex items-start gap-2" for="acceptTerms">
               <input
                  tuiCheckbox
                  name="acceptTerms"
                  type="checkbox"
                  formControlName="acceptTerms"
                  (change)="onAcceptanceChange()"
               />
               <span class="text-sm">
                  <span class="text-(--tui-text-negative)">*</span> Akceptuję
                  <a routerLink="/terms" class="text-blue-600 underline">regulamin serwisu</a>
               </span>
            </label>
            <tui-error formControlName="acceptTerms" [error]="[] | tuiFieldError | async" />
         </div>
         <div class="flex flex-col gap-4">
            <label class="flex items-start gap-2" for="acceptPrivacy">
               <input
                  tuiCheckbox
                  name="acceptPrivacy"
                  type="checkbox"
                  formControlName="acceptPrivacy"
                  (change)="onAcceptanceChange()"
               />
               <span class="text-sm">
                  <span class="text-(--tui-text-negative)">*</span> Akceptuję
                  <a routerLink="/privacy" class="text-blue-600 underline">politykę prywatności</a>
               </span>
            </label>
            <tui-error formControlName="acceptPrivacy" [error]="[] | tuiFieldError | async" />
         </div>
         <label class="flex items-start gap-2" for="acceptMarketing">
            <input
               tuiCheckbox
               name="acceptMarketing"
               type="checkbox"
               formControlName="acceptMarketing"
               (change)="onAcceptanceChange()"
            />
            <span class="text-sm">
               Chcę otrzymywać oferty specjalne i inne informacje handlowe od Bitee sp. z o.o.
               dotyczące usług oferowanych przez Bitee.pl za pośrednictwem komunikacji
               elektronicznej.
            </span>
         </label>
      </div>

      <div class="flex flex-col gap-4 mt-4">
         <button
            tuiButton
            type="submit"
            [disabled]="formGroup().invalid"
            appearance="primary"
            [loading]="isLoading()"
         >
            Wypróbuj za darmo
         </button>
         <button
            tuiButton
            type="button"
            appearance="outline-grayscale"
            (click)="onPreviousStep.emit()"
         >
            Wróć do danych podstawowych
         </button>
      </div>
   </form>
</div>
